;/*FB_PKG_DELIM*/

__d("HeroInteractionIgnoreWithDiv.react",["CometHeroInteractionContextPassthrough.react","CometVisualCompletionAttributes","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.children,d=a.ignoreHero;a=a.xstyle;return h.jsx("div",babelHelpers["extends"]({},c("CometVisualCompletionAttributes").IGNORE,{className:c("stylex")(a),children:h.jsx(c("CometHeroInteractionContextPassthrough.react"),{clear:(a=d)!=null?a:!0,children:b})}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("IGDMailboxIsSynced.bs",["I64","LSIntEnum","ReQL","ReQLSuspense","useReStore"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=c("useReStore")(),b=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(a.table("sync_groups")).getKeyRange(d("LSIntEnum").ofNumber(1))},[a],f.id+":27");return b!=null&&d("I64").equal(b.syncStatus,d("LSIntEnum").ofNumber(2))}g.useHook=a}),98);
__d("MWCMIsThreadBumped",["I64","MWCMIsAnyCMThread"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.secondaryParentThreadKey;a=a.threadType;return c("MWCMIsAnyCMThread")(a)&&b!=null&&d("I64").equal(b,d("I64").of_int32(0))}g["default"]=a}),98);
__d("MWIsXacGroupThread.bs",["LSIntEnum","LSThreadBitOffset"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return d("LSThreadBitOffset").has(d("LSIntEnum").ofNumber(97),a)}g.check=a}),98);
__d("MWChatBadgeCountUpdates.react",["I64","LSIntEnum","MWCMIsThreadBumped","MWIsXacGroupThread.bs","MWPIsThreadUnread.bs","MWXacGating.bs","MetaConfig","ReQL","ReQLSuspense","ServerTime","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useMemo;function i(a){if(!d("I64").equal(a.threadType,d("LSIntEnum").ofNumber(2))||d("MWXacGating.bs").isGroupsEnabled())return!0;else return!d("MWIsXacGroupThread.bs").check(a)}function j(a,b){var c=(b=b)!=null?b:d("LSIntEnum").ofNumber(0);b=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(a.table("folder_metadata")).getKeyRange(c)},[a,c],f.id+":60")||{};b=b.lastSeenRequestTimestampMs;var e=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(a.table("threads").index("parentThreadKeyLastActivityTimestampMs")).take(15)},[a],f.id+":68")!=null;return{hasProbablyFinishedInitSync:e,maybeFolderLastSeenTimestamp:b,parentFolderToUse:c}}function k(a){if(d("I64").equal(a.muteExpireTimeMs,d("I64").neg_one))return!0;else return d("I64").gt(a.muteExpireTimeMs,d("I64").of_float(d("ServerTime").getMillis()))}function a(a){var b=c("useReStore")(),e=j(b,a),g=e.hasProbablyFinishedInitSync,l=e.maybeFolderLastSeenTimestamp,m=e.parentFolderToUse,n=c("MetaConfig")._("41")===!0,o=(e=l)!=null?e:d("I64").zero,p=d("ReQLSuspense").useArray(function(){return n?d("ReQL").fromTableAscending(b.table("community_folders")):d("ReQL").empty()},[b,n],f.id+":105"),q=h(function(){return new Set(p.filter(function(a){return a.isHidden}).map(function(a){return d("I64").to_string(a.folderId)}))},[p]);e=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(b.table("threads").index("parentThreadKeyLastActivityTimestampMs")).getKeyRange(m).take(15).filter(function(a){if(d("MWPIsThreadUnread.bs").isThreadUnread(a))return!k(a);else return!1}).bounds({gt:d("ReQL").key(o)}).filter(i)},[b,m,o],f.id+":122");var r=d("ReQLSuspense").useArray(function(){return!n||!d("I64").equal(m,d("LSIntEnum").ofNumber(0))?d("ReQL").empty():d("ReQL").fromTableAscending(b.table("threads").index("secondaryParentThreadKeyLastActivityTimestampMs")).getKeyRange(m).take(15).filter(function(a){if(d("MWPIsThreadUnread.bs").isThreadUnread(a)&&!(c("MWCMIsThreadBumped")(a)&&q.has(d("I64").to_string(a.parentThreadKey))))return!k(a);else return!1}).bounds({gt:d("ReQL").key(o)}).filter(i)},[b,q,n,m,o],f.id+":143");e=e.length+r.length;if(a==null)return;return g?e:l!=null?e:void 0}function l(a,b){var e=c("useReStore")(),g=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(e.table("threads").index("threadTypeLastActivityTimestampMs")).getKeyRange(a).take(15).filter(function(a){if(d("MWPIsThreadUnread.bs").isThreadUnread(a))return!k(a);else return!1}).bounds({gt:d("ReQL").key(b)}).filter(i)},[b,e,a],f.id+":205");return g}function b(){var a=c("useReStore")();a=j(a,d("LSIntEnum").ofNumber(-14));var b=a.hasProbablyFinishedInitSync;a=a.maybeFolderLastSeenTimestamp;a=(a=a)!=null?a:d("I64").zero;var e=l(d("LSIntEnum").ofNumber(18),a),f=l(d("LSIntEnum").ofNumber(23),a);a=l(d("LSIntEnum").ofNumber(21),a);if(b)if(e!=null||f!=null)return!0;else return a!=null;else return!1}e=15;g.useHook=a;g.useHasUnseenCommunityThreads=b;g.minSyncedThreads=e}),98);
__d("IGDUnreadBadgeCountUpdates",["I64","LSIntEnum","MWChatBadgeCountUpdates.react","MWIsXacGroupThread.bs","MWPIsThreadUnread.bs","ReQL","ReQLSuspense","ServerTime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=c("useReStore")(),b=function(a){return d("I64").to_float(a.muteExpireTimeMs)===-1||d("I64").to_float(a.muteExpireTimeMs)>d("ServerTime").getMillis()},e=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableDescending(a.table("threads").index("parentThreadKeyLastActivityTimestampMs")).getKeyRange(d("LSIntEnum").ofNumber(0)).take(d("MWChatBadgeCountUpdates.react").minSyncedThreads).filter(function(a){return d("MWPIsThreadUnread.bs").isThreadUnread(a)&&!b(a)}).filter(function(a){return!d("MWIsXacGroupThread.bs").check(a)})},[a],f.id+":39");return e.length}g["default"]=a}),98);
__d("MAWInitSyncComplete.bs",["I64"],(function(a,b,c,d,e,f,g){"use strict";a=d("I64").of_string("1000");g.id=a}),98);
__d("MAWChatBadgeInitSyncCompleteUpdates.bs",["I64","LSIntEnum","MAWInitSyncComplete.bs","ReQL.bs","ReQLSubscription.bs","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(){var a=c("useReStore")(),b=d("ReQLSubscription.bs").useFirst(h.useMemo(function(){return d("ReQL.bs").getKeyRange(d("ReQL.bs").fromTableAscending(a.table("sync_groups")),{hd:d("MAWInitSyncComplete.bs").id,tl:0})},[a]),"c90l3tjj");return b!=null?d("I64").equal(b.syncStatus,d("LSIntEnum").ofNumber(2)):!1}g.useHook=a}),98);
__d("PolarisIGCoreAppMessengerPanoFilledIcon",["PolarisIGCoreSVGIcon","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){return h.jsx(c("PolarisIGCoreSVGIcon"),babelHelpers["extends"]({},a,{viewBox:"0 0 24 24",children:h.jsx("path",{d:"M12.003 1.131a10.487 10.487 0 0 0-10.87 10.57 10.194 10.194 0 0 0 3.412 7.771l.054 1.78a1.67 1.67 0 0 0 2.342 1.476l1.935-.872a11.767 11.767 0 0 0 3.127.416 10.488 10.488 0 0 0 10.87-10.57 10.487 10.487 0 0 0-10.87-10.57Zm5.786 9.001-2.566 3.983a1.577 1.577 0 0 1-2.278.42l-2.452-1.84a.63.63 0 0 0-.759.002l-2.556 2.049a.659.659 0 0 1-.96-.874L8.783 9.89a1.576 1.576 0 0 1 2.277-.42l2.453 1.84a.63.63 0 0 0 .758-.003l2.556-2.05a.659.659 0 0 1 .961.874Z"})}))}a.displayName=a.name+" [from "+f.id+"]";b=h.memo(a);g["default"]=b}),98);
__d("PolarisIGCoreAppMessengerFilledIcon",["PolarisIGCoreAppMessengerPanoFilledIcon","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){return h.jsx(c("PolarisIGCoreAppMessengerPanoFilledIcon"),babelHelpers["extends"]({},a))}a.displayName=a.name+" [from "+f.id+"]";b=h.memo(a);g["default"]=b}),98);
__d("PolarisIGCoreDirectFilledIcon",["PolarisIGCoreDirectPanoFilledIcon","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){return h.jsx(c("PolarisIGCoreDirectPanoFilledIcon"),babelHelpers["extends"]({},a))}a.displayName=a.name+" [from "+f.id+"]";b=h.memo(a);g["default"]=b}),98);
__d("IGDBadgeIcon.react",["CometPlaceholder.react","HeroInteractionIgnoreWithDiv.react","IGDMailboxIsSynced.bs","IGDUnreadBadgeCountUpdates","MAWChatBadgeInitSyncCompleteUpdates.bs","PolarisDirectActionConnectToMqtt","PolarisDirectActionGetInteropStatus","PolarisDirectLogger","PolarisDirectStringHelpers","PolarisDirectStrings","PolarisHasMessagesSubpanel","PolarisIGCoreAppMessengerFilledIcon","PolarisIGCoreAppMessengerOutlineIcon","PolarisIGCoreDirectFilledIcon","PolarisIGCoreDirectOutlineIcon","PolarisNavigationActionConstants","PolarisNavigationConstants","PolarisNavigationItem.react","PolarisNavigationLayoutContext","PolarisNavigationStrings","PolarisNavigationTooltipWrapper.react","PolarisODS","PolarisQPConstants","PolarisQPTooltip","PolarisReactRedux","PolarisRoutes","PolarisUA","deferredLoadComponent","gkx","polarisNavigationSelectors","polarisQPSelectors","polarisUserSelectors","qex","react","requireDeferred","usePolarisDirectFeatures"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");a=d("react");var i=a.useCallback,j=a.useContext,k=a.useEffect,l=a.useState,m=c("deferredLoadComponent")(c("requireDeferred")("IGDPageSetup.react").__setRef("IGDBadgeIcon.react")),n=h.memo(function(a){var b=a.hasOpenSubpanel;b=b===void 0?!1:b;var e=a.hasPadding;e=e===void 0?!0:e;var f=a.initialCount,g=f===void 0?0:f;f=a.isActivityModalOpen;var l=f===void 0?!1:f;f=a.isOnDirectPage;f=f===void 0?!1:f;var m=a.location,n=a.modalOpen;n=n===void 0?!1:n;var o=a.onClick,p=a.productAttribution,q=a.unseenCount,r=q===void 0?0:q;q=babelHelpers.objectWithoutPropertiesLoose(a,["hasOpenSubpanel","hasPadding","initialCount","isActivityModalOpen","isOnDirectPage","location","modalOpen","onClick","productAttribution","unseenCount"]);var s=d("PolarisReactRedux").useDispatch();a=d("PolarisReactRedux").useSelector(d("polarisQPSelectors").getFeedFilter);var t=d("PolarisReactRedux").useSelector(d("polarisUserSelectors").getViewer),u=d("PolarisReactRedux").useSelector(d("polarisNavigationSelectors").getIsDesktopNavMenuOpen),v=d("PolarisReactRedux").useSelector(d("polarisNavigationSelectors").getIsDirectDropdownOpen),w=d("PolarisReactRedux").useSelector(d("polarisNavigationSelectors").getIsFeedCreationOpen),x=d("PolarisReactRedux").useSelector(d("polarisNavigationSelectors").getIsLiveCreationModalOpen),y=d("PolarisReactRedux").useSelector(function(a){return d("polarisNavigationSelectors").getCurrentVisibleNavDisplay(a,{showActivityModal:l})}),z=d("PolarisReactRedux").useSelector(function(a){return d("polarisQPSelectors").getQPSlot(a,D)}),A=c("usePolarisDirectFeatures")();A=A.hasMessagingRedesign;k(function(){c("gkx")("6767")||s(d("PolarisDirectActionConnectToMqtt").connectToMqtt("badge_count_only"))},[s]);k(function(){s(d("PolarisDirectActionGetInteropStatus").getInteropStatus())},[s]);k(function(){d("PolarisDirectLogger").DirectLogger.logDirectEvent("DirectBadgeIcon","badge_impression",{has_count:g>0,unseen_count:g})},[g]);var B=i(function(){o&&o(),d("PolarisUA").isDesktop()&&c("PolarisODS").incr("web.navigation.click.desktop.direct"),d("PolarisDirectLogger").DirectLogger.logDirectEvent("DirectBadgeIcon","badge_click",{has_count:r>0,unseen_count:r})},[r]),C=A?h.jsx(c("PolarisIGCoreAppMessengerFilledIcon"),babelHelpers["extends"]({alt:d("PolarisDirectStrings").MESSENGER_ALT_TEXT},q)):h.jsx(c("PolarisIGCoreDirectFilledIcon"),babelHelpers["extends"]({alt:d("PolarisDirectStrings").DIRECT_ALT_TEXT},q));A=A?h.jsx(c("PolarisIGCoreAppMessengerOutlineIcon"),babelHelpers["extends"]({alt:d("PolarisDirectStrings").MESSENGER_ALT_TEXT},q)):h.jsx(c("PolarisIGCoreDirectOutlineIcon"),babelHelpers["extends"]({alt:d("PolarisDirectStrings").DIRECT_ALT_TEXT},q));q=y===d("PolarisNavigationConstants").ELIGIBLE_NAV_DISPLAYS.direct_qp_banner;y=t==null?void 0:t.username;var D=m.pathname!=null&&y!=null&&m.pathname.includes(y+"/");t=!l&&!u&&!w&&!x&&(f||v||n);m=c("PolarisNavigationItem.react")!=null?r<100?String(r):"99+":r<10?String(r):"9+";y=t?C:A;u=j(c("PolarisNavigationLayoutContext"));w=u.navigationPosition;x=d("PolarisUA").isDesktop()&&z!=null&&q?h.jsx(c("PolarisNavigationTooltipWrapper.react"),{arrowPosition:w,children:h.jsx(c("PolarisQPTooltip"),{anchor:d("PolarisQPConstants").QP_TOOLTIP_ANCHORS.direct_icon,filter:z===d("PolarisQPConstants").SLOTS.feed?a:null,slot:z,trigger:d("PolarisQPConstants").TRIGGERS.instagram_navigation_tooltip})}):null;return h.jsx(c("PolarisNavigationItem.react"),{"aria-label":d("PolarisDirectStringHelpers").getBadgeNotificationAltText(r),badgeText:r>0?m:void 0,badgeVariant:"messages",hasOpenSubpanel:b,hasPadding:e,href:d("PolarisHasMessagesSubpanel").hasMessagesSubpanel()?void 0:d("PolarisRoutes").DIRECT_INBOX,icon:y,isActive:t,label:d("PolarisNavigationStrings").MESSAGES_TEXT,onClick:B,productAttribution:p,section:d("PolarisNavigationActionConstants").NAVIGATION_SECTION_DIRECT,tooltip:x!=null?x:void 0})}),o=function(a){var b,e=a.isActivityModalOpen;e=e===void 0?!1:e;var f=a.isOnDirectPage;f=f===void 0?!1:f;var g=a.location;a=babelHelpers.objectWithoutPropertiesLoose(a,["isActivityModalOpen","isOnDirectPage","location"]);var i=c("IGDUnreadBadgeCountUpdates")(),j=d("IGDMailboxIsSynced.bs").useHook(),k=d("MAWChatBadgeInitSyncCompleteUpdates.bs").useHook();b=(b=c("qex")._("779"))!=null?b:!1;b=b?k:j;j=b?(k=i)!=null?k:0:0;b=l(j);i=b[0];return h.jsx(n,babelHelpers["extends"]({initialCount:i,isActivityModalOpen:e,isOnDirectPage:f,location:g,unseenCount:j},a))};b=function(a){var b=a.isActivityModalOpen;b=b===void 0?!1:b;var e=a.location;a=babelHelpers.objectWithoutPropertiesLoose(a,["isActivityModalOpen","location"]);var f=e.pathname.startsWith("/direct/")&&(e.pathname===d("PolarisRoutes").DIRECT_INBOX||e.pathname===d("PolarisRoutes").DIRECT_INBOX_GENERAL||e.pathname===d("PolarisRoutes").DIRECT_NEW||e.pathname===d("PolarisRoutes").DIRECT_REQUESTS||e.pathname.startsWith(d("PolarisRoutes").DIRECT_THREADS));return h.jsx(c("HeroInteractionIgnoreWithDiv.react"),{children:h.jsx(c("CometPlaceholder.react"),{fallback:h.jsx(n,babelHelpers["extends"]({isActivityModalOpen:b,isOnDirectPage:f,location:e},a)),children:h.jsx(m,{disableRouteProvider:!0,placeholder:h.jsx(n,babelHelpers["extends"]({isActivityModalOpen:b,isOnDirectPage:f,location:e},a)),shouldUseDeferredLoadingStrategy:!0,children:h.jsx(o,babelHelpers["extends"]({isActivityModalOpen:b,isOnDirectPage:f,location:e},a))})})})};e=b;g["default"]=e}),98);